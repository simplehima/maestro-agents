<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Maestro V2 - AI Agent Platform</title>
  <link rel="stylesheet" href="./src/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,400;12..96,600;12..96,800&family=Figtree:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>

<body>
  <div id="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <img src="/logo.png" alt="Maestro" class="logo-icon-img">
          <span class="logo-text">Maestro</span>
          <span class="version-badge">V2</span>
        </div>
      </div>

      <nav class="sidebar-nav">
        <button class="nav-btn active" data-view="dashboard">
          <i data-lucide="layout-dashboard"></i>
          <span>Dashboard</span>
        </button>
        <button class="nav-btn" data-view="projects">
          <i data-lucide="folder-open"></i>
          <span>Projects</span>
        </button>
        <button class="nav-btn" data-view="agents">
          <i data-lucide="users"></i>
          <span>Agents</span>
        </button>
        <button class="nav-btn" data-view="settings">
          <i data-lucide="settings"></i>
          <span>Settings</span>
        </button>
      </nav>

      <div class="sidebar-section">
        <h3 class="section-title">Recent Projects</h3>
        <div id="recent-projects" class="project-list">
          <div class="empty-state">No projects yet</div>
        </div>
      </div>

      <div class="sidebar-footer">
        <div class="status-indicator" id="backend-status">
          <span class="dot offline"></span>
          <span>Disconnected</span>
        </div>
        <div class="about-section">
          <div class="about-header">
            <i data-lucide="code-2"></i>
            <span>Created by</span>
          </div>
          <a href="https://github.com/simplehima" target="_blank" class="creator-link">
            <img src="https://github.com/simplehima.png" alt="HimaAzab" class="creator-avatar">
            <div class="creator-info">
              <span class="creator-name">HimaAzab</span>
              <span class="creator-handle">@simplehima</span>
            </div>
            <i data-lucide="external-link"></i>
          </a>
          <a href="https://ibrahim-azab.com/" target="_blank" class="portfolio-link">
            <i data-lucide="globe"></i>
            <span>ibrahim-azab.com</span>
          </a>
        </div>
        <div class="app-version">
          <span>Maestro V2.1.0</span>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Dashboard View -->
      <section id="dashboard-view" class="view active">
        <header class="view-header">
          <h1>New Project</h1>
          <div class="model-selector">
            <label>Model Preset:</label>
            <select id="model-preset">
              <option value="basic">Basic (8B models)</option>
              <option value="standard">Standard (13B-70B)</option>
              <option value="advanced">Advanced (33B-70B)</option>
              <option value="cloud">Cloud (GPT-4, Claude)</option>
              <option value="free">Free API (No Cost)</option>
            </select>
          </div>
        </header>

        <div class="dashboard-grid">
          <div class="card objective-card">
            <div class="card-header">
              <i data-lucide="target"></i>
              <h2>Project Objective</h2>
            </div>
            <div class="card-body">
              <input type="text" id="project-name" placeholder="Project Name (optional)">
              <textarea id="objective-input"
                placeholder="Describe what you want to build...&#10;&#10;Example: Build a modern task management app with a dark theme, drag-and-drop functionality, and real-time sync."></textarea>
              <button id="start-btn" class="primary-btn">
                <i data-lucide="play"></i>
                Start Orchestration
              </button>

              <div class="divider-or">
                <span>or</span>
              </div>

              <div class="open-existing-section">
                <h3><i data-lucide="folder-open"></i> Open Existing Project</h3>
                <p class="hint">Work on an existing codebase (Flutter, React, Python, etc.)</p>
                <div class="input-row">
                  <input type="text" id="existing-path" placeholder="C:\path\to\your\project" readonly>
                  <button id="browse-folder-btn" class="secondary-btn">
                    <i data-lucide="folder-search"></i>
                    Browse
                  </button>
                </div>
                <div id="project-type-info" class="project-type-info hidden">
                  <span class="type-badge"><i data-lucide="code-2"></i> <span
                      id="detected-framework">Unknown</span></span>
                  <span class="lang-badge"><i data-lucide="braces"></i> <span
                      id="detected-language">Unknown</span></span>
                </div>
                <button id="import-project-btn" class="primary-btn" disabled>
                  <i data-lucide="file-input"></i>
                  Import & Continue Working
                </button>
              </div>
            </div>
          </div>

          <div class="card guidance-card">
            <div class="card-header">
              <i data-lucide="message-circle"></i>
              <h2>Live Guidance</h2>
            </div>
            <div class="card-body">
              <p class="hint">Intervene and steer the agents in real-time</p>
              <div class="input-row">
                <input type="text" id="guidance-input" placeholder="Give instructions to agents...">
                <button id="guide-btn" class="secondary-btn">Send</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Agent Status Bar (LED Dashboard) -->
        <div class="agent-status-bar">
          <h2 class="section-title">Agent Status</h2>
          <div class="agent-status-grid">
            <div class="agent-status-card" id="led-orchestrator" data-agent="Orchestrator">
              <div class="agent-card-header">
                <span class="led idle"></span>
                <span class="agent-name">Orchestrator</span>
                <span class="agent-model-badge">llama3</span>
              </div>
              <div class="agent-task">Idle</div>
              <div class="agent-progress-bar">
                <div class="agent-progress-fill"></div>
              </div>
            </div>
            <div class="agent-status-card" id="led-research" data-agent="Research">
              <div class="agent-card-header">
                <span class="led idle"></span>
                <span class="agent-name">Research</span>
                <span class="agent-model-badge">llama3</span>
              </div>
              <div class="agent-task">Idle</div>
              <div class="agent-progress-bar">
                <div class="agent-progress-fill"></div>
              </div>
            </div>
            <div class="agent-status-card" id="led-uiux" data-agent="UI/UX Designer">
              <div class="agent-card-header">
                <span class="led idle"></span>
                <span class="agent-name">UI/UX</span>
                <span class="agent-model-badge">deepseek</span>
              </div>
              <div class="agent-task">Idle</div>
              <div class="agent-progress-bar">
                <div class="agent-progress-fill"></div>
              </div>
            </div>
            <div class="agent-status-card" id="led-developer" data-agent="Developer">
              <div class="agent-card-header">
                <span class="led idle"></span>
                <span class="agent-name">Developer</span>
                <span class="agent-model-badge">deepseek</span>
              </div>
              <div class="agent-task">Idle</div>
              <div class="agent-progress-bar">
                <div class="agent-progress-fill"></div>
              </div>
            </div>
            <div class="agent-status-card" id="led-security" data-agent="Security">
              <div class="agent-card-header">
                <span class="led idle"></span>
                <span class="agent-name">Security</span>
                <span class="agent-model-badge">codellama</span>
              </div>
              <div class="agent-task">Idle</div>
              <div class="agent-progress-bar">
                <div class="agent-progress-fill"></div>
              </div>
            </div>
            <div class="agent-status-card" id="led-qa" data-agent="QA Tester">
              <div class="agent-card-header">
                <span class="led idle"></span>
                <span class="agent-name">QA</span>
                <span class="agent-model-badge">llama3</span>
              </div>
              <div class="agent-task">Idle</div>
              <div class="agent-progress-bar">
                <div class="agent-progress-fill"></div>
              </div>
            </div>
            <div class="agent-status-card" id="led-docs" data-agent="Documentation">
              <div class="agent-card-header">
                <span class="led idle"></span>
                <span class="agent-name">Docs</span>
                <span class="agent-model-badge">llama3</span>
              </div>
              <div class="agent-task">Idle</div>
              <div class="agent-progress-bar">
                <div class="agent-progress-fill"></div>
              </div>
            </div>
            <div class="agent-status-card" id="led-refiner" data-agent="Refiner">
              <div class="agent-card-header">
                <span class="led idle"></span>
                <span class="agent-name">Refiner</span>
                <span class="agent-model-badge">llama3</span>
              </div>
              <div class="agent-task">Idle</div>
              <div class="agent-progress-bar">
                <div class="agent-progress-fill"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Two Column Layout: File Explorer + Activity -->
        <div class="live-panel-grid">
          <!-- File Explorer Panel -->
          <div class="file-explorer-panel">
            <div class="panel-header">
              <h3><i data-lucide="folder-tree"></i> Project Files</h3>
              <button id="refresh-files-btn" class="icon-btn"><i data-lucide="refresh-cw"></i></button>
            </div>
            <div id="file-tree" class="file-tree">
              <div class="empty-state">Start a project to see files...</div>
            </div>
          </div>

          <!-- File Viewer Panel -->
          <div class="file-viewer-panel">
            <div class="panel-header">
              <h3><i data-lucide="file-code"></i> <span id="current-file-name">No file selected</span></h3>
              <button id="close-file-btn" class="icon-btn hidden"><i data-lucide="x"></i></button>
            </div>
            <pre id="file-content" class="file-content"><code>Select a file to view its contents...</code></pre>
          </div>
        </div>

        <!-- Integrated Terminal -->
        <div class="terminal-section">
          <div class="section-header">
            <h2 class="section-title"><i data-lucide="terminal"></i> Terminal</h2>
            <div class="terminal-controls">
              <button id="run-project-btn" class="secondary-btn"><i data-lucide="play"></i> Run</button>
              <button id="clear-terminal-btn" class="icon-btn"><i data-lucide="trash-2"></i></button>
            </div>
          </div>
          <div id="terminal-container" class="terminal-container">
            <div class="terminal-output" id="terminal-output">
              <div class="terminal-line">$ Ready to run commands...</div>
            </div>
            <div class="terminal-input-row">
              <span class="terminal-prompt">$</span>
              <input type="text" id="terminal-input" class="terminal-input" placeholder="Enter command...">
            </div>
          </div>
        </div>

        <!-- Activity Feed -->
        <div class="activity-section">
          <div class="section-header">
            <h2 class="section-title">Activity Feed</h2>
            <div class="log-controls">
              <div class="view-toggle">
                <button id="view-single" class="view-btn active" title="Single View"><i data-lucide="list"></i></button>
                <button id="view-split" class="view-btn" title="Split View (2 Agents)"><i
                    data-lucide="columns-2"></i></button>
                <button id="view-quad" class="view-btn" title="Quad View (4 Agents)"><i
                    data-lucide="grid-2x2"></i></button>
              </div>
              <button id="clear-feed" class="icon-btn"><i data-lucide="trash-2"></i></button>
            </div>
          </div>
          <div id="logs-container" class="logs-container">
            <div class="log-entry system">
              <span class="log-icon"><i data-lucide="info"></i></span>
              <span class="log-text">Waiting for objective...</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Projects View -->
      <section id="projects-view" class="view">
        <header class="view-header">
          <h1>Projects</h1>
          <button id="new-project-btn" class="primary-btn">
            <i data-lucide="plus"></i> New Project
          </button>
        </header>
        <div id="projects-grid" class="projects-grid">
          <!-- Dynamically populated -->
        </div>
      </section>

      <!-- Agents View -->
      <section id="agents-view" class="view">
        <header class="view-header">
          <h1>Agent Logs</h1>
        </header>
        <div class="agent-logs-container">
          <div class="agent-log-tabs">
            <button class="log-tab active" data-agent="orchestrator">Orchestrator</button>
            <button class="log-tab" data-agent="research">Research</button>
            <button class="log-tab" data-agent="uiux">UI/UX</button>
            <button class="log-tab" data-agent="developer">Developer</button>
            <button class="log-tab" data-agent="security">Security</button>
            <button class="log-tab" data-agent="qa">QA</button>
            <button class="log-tab" data-agent="documentation">Documentation</button>
            <button class="log-tab" data-agent="refiner">Refiner</button>
          </div>
          <div id="agent-log-viewer" class="agent-log-viewer">
            <pre>Select an agent to view their session logs...</pre>
          </div>
        </div>
      </section>

      <!-- Settings View -->
      <section id="settings-view" class="view">
        <header class="view-header">
          <h1>Settings</h1>
        </header>
        <div class="settings-container">
          <div class="settings-group">
            <h3><i data-lucide="server" style="width:18px;height:18px;margin-right:8px;"></i>Ollama Server</h3>
            <div class="ollama-status-row">
              <div class="ollama-status">
                <span class="status-dot" id="ollama-status-dot"></span>
                <span id="ollama-status-text">Checking...</span>
              </div>
              <button id="refresh-ollama-btn" class="icon-btn" title="Refresh">
                <i data-lucide="refresh-cw"></i>
              </button>
            </div>
            <div class="setting-item">
              <label>Ollama URL</label>
              <input type="text" id="ollama-url" value="http://localhost:11434">
            </div>
            <div class="setting-item">
              <button id="start-ollama-btn" class="secondary-btn">
                <i data-lucide="play"></i>
                Start Ollama Server
              </button>
            </div>
          </div>

          <div class="settings-group">
            <h3><i data-lucide="box" style="width:18px;height:18px;margin-right:8px;"></i>Downloaded Models</h3>
            <div id="model-list" class="model-list">
              <div class="empty-state">Loading models...</div>
            </div>
            <div class="setting-item model-download">
              <label>Download New Model</label>
              <div class="input-row">
                <select id="model-to-download">
                  <option value="llama3:8b">Llama 3 (8B) - Recommended</option>
                  <option value="llama3:70b">Llama 3 (70B) - Large</option>
                  <option value="mistral:7b">Mistral (7B)</option>
                  <option value="codellama:7b">CodeLlama (7B)</option>
                  <option value="deepseek-coder:6.7b">DeepSeek Coder (6.7B)</option>
                  <option value="phi3:mini">Phi-3 Mini</option>
                </select>
                <button id="download-model-btn" class="secondary-btn">
                  <i data-lucide="download"></i>
                  Download
                </button>
              </div>
              <div id="download-progress" class="download-progress hidden">
                <div class="progress-bar">
                  <div class="progress-fill" id="download-progress-fill"></div>
                </div>
                <span id="download-status">Downloading...</span>
              </div>
            </div>
          </div>

          <div class="settings-group">
            <h3>Model Preset</h3>
            <div class="setting-item">
              <label>Default Preset</label>
              <select id="default-preset">
                <option value="basic">Basic (llama3)</option>
                <option value="standard">Standard</option>
                <option value="advanced">Advanced</option>
                <option value="coding">Coding (deepseek-coder)</option>
                <option value="cloud">Cloud APIs</option>
              </select>
            </div>
          </div>

          <div class="settings-group">
            <h3><i data-lucide="zap" style="width:18px;height:18px;margin-right:8px;"></i>Free API (No Cost)</h3>
            <p class="settings-description">Access free AI models without API keys via the distributed ollamafreeapi.
            </p>
            <div class="ollama-status-row">
              <div class="ollama-status">
                <span class="status-dot" id="nocost-status-dot"></span>
                <span id="nocost-status-text">Checking...</span>
              </div>
              <button id="refresh-nocost-btn" class="icon-btn" title="Refresh">
                <i data-lucide="refresh-cw"></i>
              </button>
            </div>
            <div id="nocost-model-list" class="model-list">
              <div class="empty-state">Loading free models...</div>
            </div>
          </div>

          <div class="settings-group">
            <h3><i data-lucide="hard-drive" style="width:18px;height:18px;margin-right:8px;"></i>Model Backup</h3>
            <p class="settings-description">Copy your Ollama models to another PC for offline use.</p>
            <div class="setting-item">
              <label>Models Location</label>
              <div class="input-row">
                <input type="text" id="ollama-models-path" readonly value="C:\Users\[user]\.ollama\models"
                  placeholder="Loading...">
                <button id="copy-path-btn" class="secondary-btn" title="Copy path">
                  <i data-lucide="copy"></i>
                </button>
              </div>
            </div>
            <div class="setting-item">
              <button id="open-models-folder-btn" class="secondary-btn">
                <i data-lucide="folder-open"></i>
                Open Models Folder
              </button>
            </div>
          </div>
          <div class="settings-group">
            <h3>Cloud API Keys</h3>
            <div class="setting-item">
              <label>OpenAI API Key</label>
              <input type="password" id="openai-key" placeholder="sk-...">
            </div>
            <div class="setting-item">
              <label>Anthropic API Key</label>
              <input type="password" id="anthropic-key" placeholder="sk-ant-...">
            </div>
          </div>
          <div class="settings-group">
            <h3><i data-lucide="camera" style="width:18px;height:18px;margin-right:8px;"></i>Vision & Screenshots</h3>
            <p class="settings-description">Allow AI agents to capture screenshots for visual verification of their
              work.</p>
            <div class="setting-item">
              <label>Screenshot Permission</label>
              <select id="screenshot-permission">
                <option value="disabled">Disabled</option>
                <option value="ask_every_time" selected>Ask Every Time</option>
                <option value="allow_once">Allow Once (Session)</option>
                <option value="always_allow">Always Allow</option>
              </select>
            </div>
            <div class="setting-item checkbox-item">
              <label>
                <input type="checkbox" id="screenshot-audit" checked>
                <span>Enable audit log for screenshots</span>
              </label>
            </div>
            <div class="setting-item checkbox-item">
              <label>
                <input type="checkbox" id="screenshot-save">
                <span>Save screenshots to project folder</span>
              </label>
            </div>
            <div class="permission-indicator" id="vision-status">
              <i data-lucide="eye-off"></i>
              <span>Vision capability: Disabled</span>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Final Output Modal -->
    <div id="output-modal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2>Final Output</h2>
          <button id="close-modal" class="icon-btn"><i data-lucide="x"></i></button>
        </div>
        <div id="output-text" class="modal-body markdown-body"></div>
        <div class="modal-footer">
          <button id="copy-output" class="secondary-btn"><i data-lucide="copy"></i> Copy</button>
          <button id="save-output" class="primary-btn"><i data-lucide="download"></i> Save</button>
        </div>
      </div>
    </div>

    <!-- Agent Detail Modal -->
    <div id="agent-detail-modal" class="modal hidden">
      <div class="modal-content agent-detail-content">
        <div class="modal-header">
          <h2><span id="agent-detail-name">Agent Name</span></h2>
          <button id="close-agent-modal" class="icon-btn"><i data-lucide="x"></i></button>
        </div>
        <div class="modal-body">
          <div class="agent-detail-grid">
            <div class="detail-section">
              <h4><i data-lucide="cpu"></i> Model</h4>
              <p id="agent-detail-model">llama3:latest</p>
            </div>
            <div class="detail-section">
              <h4><i data-lucide="activity"></i> Status</h4>
              <p id="agent-detail-status">Idle</p>
            </div>
            <div class="detail-section full-width">
              <h4><i data-lucide="clipboard-list"></i> Current Task</h4>
              <p id="agent-detail-task">No active task</p>
            </div>
            <div class="detail-section full-width">
              <h4><i data-lucide="file-text"></i> Recent Output</h4>
              <pre id="agent-detail-output" class="output-preview">No output yet...</pre>
            </div>
            <div class="detail-section">
              <h4><i data-lucide="file-plus"></i> Files Created</h4>
              <ul id="agent-detail-files" class="file-list">
                <li>None</li>
              </ul>
            </div>
            <div class="detail-section">
              <h4><i data-lucide="clock"></i> Metrics</h4>
              <p>Tokens: <span id="agent-detail-tokens">0</span></p>
              <p>Latency: <span id="agent-detail-latency">-</span></p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Hardware Recommendation Banner (shown on Settings page) -->
    <div id="hardware-banner" class="hardware-banner hidden">
      <div class="hardware-info">
        <i data-lucide="cpu"></i>
        <span><strong id="hw-ram">64GB</strong> RAM â€¢ <strong id="hw-cores">16</strong> cores</span>
      </div>
      <div class="hardware-advice" id="hw-advice">
        Your system can run the largest models
      </div>
      <div class="hardware-recommendations" id="hw-recommendations"></div>
    </div>
  </div>

  <script type="module" src="./src/main.ts"></script>
</body>

</html>